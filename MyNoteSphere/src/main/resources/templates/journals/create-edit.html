<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title th:text="${journal.id == null ? 'Create Journal' : 'Edit Journal'}">
        Journal Editor
    </title>

    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}" />

    <!-- Spring Security CSRF -->
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
</head>

<body>

<!-- Sidebar -->
<div th:replace="~{fragments/sidebar :: sidebar}"></div>

<main class="journal-container">
    <div class="editor-container">

        <form th:action="${journal.id == null ? '/journals/new' : '/journals/edit/' + journal.id}"
              th:object="${journal}"
              method="post">

            <!-- CSRF -->
            <input type="hidden"
                   th:name="${_csrf.parameterName}"
                   th:value="${_csrf.token}" />

            <!-- Title -->
            <input type="text"
                   class="title-input"
                   th:field="*{title}"
                   placeholder="Title"
                   required />

            <!-- TEXTAREA (TinyMCE attaches here) -->
            <textarea id="editor"
                      th:field="*{content}"
                      class="content-input"
                      placeholder="Start writing...">
            </textarea>

            <!-- Submit -->
            <button type="submit"
                    class="btn-save"
                    th:text="${journal.id == null ? 'Save' : 'Update'}">
                Save
            </button>

        </form>
    </div>
</main>

<!-- TinyMCE CDN -->
<script src="https://cdn.tiny.cloud/1/g6une710tx8getbxwg84b9hodn2v6wtruj0ikxqya4m6kcji/tinymce/6/tinymce.min.js"
        referrerpolicy="origin"></script>

<!-- TinyMCE Initialization -->
<script>
    tinymce.init({
        selector: '#editor',
        height: 600,
        menubar: false,
        plugins: 'lists link image table code',
        toolbar:
            'undo redo | bold italic underline | ' +
            'bullist numlist | link image table | code',
        branding: false
    });
</script>

</body>
</html>
